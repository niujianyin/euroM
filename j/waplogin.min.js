function WapLogin() {
  var a = this;
  this.login = function(b, f, c, d) {
    var e = arguments.length;
    if (window.SINA_OUTLOGIN_LAYER && !b) {
      _loginLayer = window.SINA_OUTLOGIN_LAYER;
      _loginLayer.set("sso", {
        entry: "wapsso"
      }).init();
      _loginLayer.show();
      _loginLayer.register("login_success", function(g) {
        a.updateUserInfo(g);
        switch (e) {
          case 2:
            f();
            break;
          case 3:
            f(c);
            break;
          case 4:
            f(c, d);
            break;
          default:
            window.location.href = window.location.href;
            break
        }
      });
      _loginLayer.register("layer_hide", function() {
        f = null
      })
    }
    return false
  };
  this.updateUserInfo = function(d) {
    console.log(d);
    if (typeof(d) != "undefined" && typeof(d.nick) != "undefined") {
      window.userInfo = {};
      window.userInfo.uname = d.nick;
      window.userInfo.userface = d.portrait;
      window.userInfo.uid = d.uid;
      window.userInfo.islogin = 1;
      var c = ["#loginBox", "#loginImg", ".userImage"],
        h = $("#footer_entry");
      for (var g = 0; g < c.length; g++) {
        var f = $(c[g]);
        if (f.length > 0 && f.find("img").length > 0) {
          f.find("img").attr("src", d.portrait)
        } else {
          if (f.length > 0 && f.find("img").length <= 0) {
            var e = '<img src="' + d.portrait + '">';
            f.html(e)
          }
        }
      }
      if (h.length > 0) {
        var b = "http://passport.sina.cn/sso/logout?entry=wapsso&vt=4&r=" + encodeURIComponent(window.location.href);
        h.html("退出").attr("href", b)
      }
    }
    return false
  }
};
